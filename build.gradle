/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */
apply plugin: 'java'
repositories {
    jcenter()
}
dependencies {
    runtime 'org.antlr:antlr4:4.8'
}

task generateLexer(type:JavaExec) {
  def lexerName = "DOTLexer"
  inputs.file("$ANTLR_SRC/${lexerName}.g4")
  outputs.file("$GEN_SRC/${lexerName}.py")
  outputs.file("$GEN_SRC/${lexerName}.interp")
  outputs.file("$GEN_SRC/${lexerName}.tokens")
  main = 'org.antlr.v4.Tool'
  classpath = sourceSets.main.runtimeClasspath
  args = ['-Dlanguage=Python3', "${lexerName}.g4", '-o', '../main-generated']
  workingDir = ANTLR_SRC   
}
task generateParser(type:JavaExec) {
  dependsOn generateLexer
  def lexerName = "DOTLexer"
  def parserName = "DOTParser"
  inputs.file("$ANTLR_SRC/${parserName}.g4")
  inputs.file("$GEN_SRC/${lexerName}.tokens")
  outputs.file("$GEN_SRC/${parserName}.py")
  outputs.file("$GEN_SRC/${parserName}.interp")
  outputs.file("$GEN_SRC/${parserName}.tokens")
  main = 'org.antlr.v4.Tool'
  classpath = sourceSets.main.runtimeClasspath
  args = ['-Dlanguage=Python3', "${parserName}.g4", '-o', '../main-generated']
  workingDir = ANTLR_SRC
}